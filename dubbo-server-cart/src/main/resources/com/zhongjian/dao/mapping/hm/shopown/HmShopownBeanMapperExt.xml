<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zhongjian.dao.entity.hm.shopown.HmShopownBean">

    <resultMap id="BaseShopownMap" type="com.zhongjian.dto.hm.shopown.result.HmShopownResultDTO">
        <id column="pid" property="pid" jdbcType="INTEGER"/>
        <result column="sname" property="shopName" jdbcType="VARCHAR"/>
        <result column="pic" property="picture" jdbcType="VARCHAR"/>
        <result column="status" property="status" jdbcType="VARCHAR"/>
        <collection property="hmStoreActivityResultDTOS"
                    select="com.zhongjian.dao.entity.hm.store.HmStoreActivityBean.findStoreActivityBySid" column="pid">
        </collection>
    </resultMap>
    <select id="findShopownInfoByMarketId" parameterType="java.lang.Integer" resultMap="BaseShopownMap">
        SELECT
            DISTINCT (s.pid),
            s.sname,
            s.pic,
            s.`status`
        FROM
            hm_shopown s
        inner JOIN hm_market h ON h.id=s.marketid
        inner join hm_goods g on g.pid = s.pid
        inner join hm_basket b on b.gid=g.id
        WHERE
            s.marketid = #{martketId.jdbcType=INTEGER}
    </select>


</mapper>
